<!DOCTYPE html>
<html>
<head>
    <title>My Web Game</title>
    <style>
        body {
          margin: 0;
          background-color: #25402c;
          color: #99eeaa;
          font-family: Arial;
          text-align: center;
        }

        #menu {
          position: absolute;
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;

        }

        button {
          padding: 15px 30px;
          font-size: 20px;
          cursor: pointer;
          color: #224433;
        }

        canvas {
          display: none;
          background: #336644;
          margin: auto;
        }

        #score {
          position: absolute;
          top: 10px;
          left: 10px;
          font-size: 24px;
          display: none;
        }
    </style>
</head>
<body>

<!-- MAIN MENU -->
<div id="menu">
    <h1>My Game</h1>
    <button id="playBtn">Play</button>
</div>

<div id="score">Score: 0</div>

<!-- GAME -->
<canvas id="game" width="1536" height="729"></canvas>

<script>
    // ----- GAME STATE -----
    let gameState = "menu";

    // ----- ELEMENTS -----
    const menu = document.getElementById("menu");
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const playBtn = document.getElementById("playBtn");
    const scoreText = document.getElementById("score");

    // ----- PLAYER -----
    let x = 100;
    let y = 100;
    let size = 40;

    let vx = 0;
    let vy = 0;
    let accel = 0.8;     // how fast you speed up
    let friction = 0.85; // how smooth it slows down
    let maxSpeed = 8;

    // ----- INPUT -----
    const keys = {};

    window.addEventListener("keydown", e => keys[e.key] = true);
    window.addEventListener("keyup", e => keys[e.key] = false);

    // ----- SCORE -----
    let score = 0;

    // ----- COINS -----
    let coins = [];

    function spawnCoins() {
      coins = [];
      for (let i = 0; i < 10; i++) {
        coins.push({
          x: Math.random() * (canvas.width - 20),
          y: Math.random() * (canvas.height - 20),
          size: 20
        });
      }
    }

    // ----- BUTTON -----
    playBtn.onclick = () => {
      gameState = "game";
      menu.style.display = "none";
      canvas.style.display = "block";
      scoreText.style.display = "block";
      score = 0;
      scoreText.textContent = "Score: 0";
      spawnCoins();
      gameLoop();
    };

    // ----- GAME LOOP -----
    function gameLoop() {
  if (gameState !== "game") return;

  // ---- INPUT → VELOCITY ----
  if (keys["ArrowRight"] || keys["d"]) vx += accel;
  if (keys["ArrowLeft"]  || keys["a"]) vx -= accel;
  if (keys["ArrowUp"]    || keys["w"]) vy -= accel;
  if (keys["ArrowDown"]  || keys["s"]) vy += accel;

  // ---- LIMIT SPEED ----
  vx = Math.max(-maxSpeed, Math.min(maxSpeed, vx));
  vy = Math.max(-maxSpeed, Math.min(maxSpeed, vy));

  // ---- MOVE ----
  x += vx;
  y += vy;

  // ---- FRICTION ----
  vx *= friction;
  vy *= friction;

  // ---- WALLS ----
  x = Math.max(0, Math.min(canvas.width - size, x));
  y = Math.max(0, Math.min(canvas.height - size, y));

  // ---- DRAW ----
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Player
  ctx.fillStyle = "lime";
  ctx.fillRect(x, y, size, size);

  // ---- COINS ----
  ctx.fillStyle = "gold";
  for (let i = coins.length - 1; i >= 0; i--) {
    const c = coins[i];

    ctx.beginPath();
    ctx.arc(c.x + c.size / 2, c.y + c.size / 2, c.size / 2, 0, Math.PI * 2);
    ctx.fill();

    // Collision
    if (
      x < c.x + c.size &&
      x + size > c.x &&
      y < c.y + c.size &&
      y + size > c.y
    ) {
      coins.splice(i, 1);
      score++;
      scoreText.textContent = "Score: " + score;
    }
  }

  // ✅ RESPAWN CHECK (THIS WAS THE MISSING PART)
  if (coins.length === 0) {
    spawnCoins();
  }

  requestAnimationFrame(gameLoop);
}

</script>


</body>
</html>
